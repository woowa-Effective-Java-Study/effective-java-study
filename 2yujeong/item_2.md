# 아이템 2 – 빌더 패턴

### 정적 팩토리 메서드와 생성자 간의 공통적인 제약
선택적 매개변수(생성 시 값 설정이 필수가 아닌 필드들을 선택적으로 초기화하기 위한 매개변수)가 많을 때 적절히 대응하기 어려움

### 선택적 매개변수가 많을 때의 대안
1. 점층적 생성자 패턴
2. 자바빈즈 : 매개변수가 없는 생성자로 객체를 만든 후 setter를 호출해 원하는 매개변수의 값을 선택적으로 설정하는 방식
   - 객체 하나를 만들기 위해 너무 많은 호출 발생
   - 객체가 완전히 생성되기 전까지는 일관성 유지 불가 -> 클래스를 불변으로 만들 수 X
3. 빌더 패턴 : 점층적 생성자 패턴의 안전성 + 자바빈즈 패턴의 가독성
   - 클래스 내에서 빌더 클래스를 inner로 정의
   - 필수 매개변수만 갖는 빌더의 기본 생성자를 호출하여 빌더 객체 획득 -> 획득한 빌더 객체에서 제공하는 빌더 클래스의 메서드들(일종의 setter 역할)을 선택적으로 호출하여 원하는 선택 매개변수 설정 -> 빌더 클래스의 build() 메서드를 호출하여 필요한 객체(원래 클래스의 객체) 획득
   - 입력 매개변수는 빌더의 생성자와 메서드에서 검사, 불변식은 build() 메서드가 호출하는 원래 클래스의 생성자에서 검사(이때 빌더로부터 매개변수를 복사한 후 복사한 값들을 검사하는 게 바람직)
  - 불변 vs 불변식 : 불변식은 프로그램이 실행되는 시간, 혹은 정해진 기간 동안 반드시 만족해야 하는 조건으로, 불변식을 갖지만 불변이 아닌 가변 객체는 변경은 허용되지만 주어진 조건(불변식) 내에서만 변경이 허용된다.

### 빌더 패턴 단점
1. 장황한 코드
2. 성능에 민감한 상황에서의 빌더 생성 비용 발생

### 결론
생성자나 정적 팩토리 메서드 방식에서 처리해야할 매개변수가 많다면 빌더 패턴을 선택하는 게 낫다.
